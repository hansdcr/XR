# [项目名称] - 迭代计划详解

## 如何使用本文档

每个迭代包含：
- **目标**: 本次迭代要实现的功能
- **新建/修改文件**: 涉及的文件
- **方法列表**: 要实现的方法（按顺序）
- **代码要点**: 关键代码片段和说明
- **测试验证**: 如何验证功能正确
- **学习重点**: 本迭代的关键知识点

每完成一个迭代，建议：
1. 运行并测试代码
2. 理解每一行代码的作用
3. 与 Claude 讨论遇到的问题
4. 在理解透彻后再进行下一个迭代

---

# 阶段1: [阶段1名称]

## 迭代 1: [迭代标题]

### 目标
[清晰描述本次迭代要达成的目标]

### 新建文件
- `[文件名.扩展名]`

### 修改文件
- `[文件名.扩展名]`

### 方法列表
1. `[方法名1]` - [方法功能描述]
2. `[方法名2]` - [方法功能描述]

### 代码要点

**[文件名.扩展名]**:
```[语言]
// 关键代码示例
[代码块]
```

### 测试验证
- [验证步骤1]
- [验证步骤2]
- [预期结果]

### 学习重点
- [学习点1]: [简要说明]
- [学习点2]: [简要说明]
- [学习点3]: [简要说明]

### 代码详解

#### 1. [代码片段1标题]

```[语言]
[代码示例]
```

- [解释1]
- [解释2]
- [解释3]

#### 2. [代码片段2标题]

```[语言]
[代码示例]
```

- [解释1]
- [解释2]

#### 架构/流程图说明

```
[使用文本绘制的架构图或流程图]
```

---

## 迭代 2: [迭代标题]

### 目标
[清晰描述本次迭代要达成的目标]

### 新建文件
- `[文件名.扩展名]`

### 修改文件
- `[文件名.扩展名]`

### 方法列表
1. `[方法名1]` - [方法功能描述]

### 代码要点

**[文件名.扩展名]**:
```[语言]
[代码块]
```

### 测试验证
- [验证步骤]

### 学习重点
- [学习点1]
- [学习点2]

### 代码详解

[详细解释代码的工作原理、设计思路、技术细节]

---

# 阶段2: [阶段2名称]

## 迭代 3: [迭代标题]

[按照相同格式继续...]

---

# 迭代模版规范

## 每个迭代必须包含的元素

### 1. 目标（Goal）
- 一句话说明本次迭代要实现什么
- 使用用户视角描述功能
- 清晰、具体、可测试

**示例**:
- ✅ "创建应用入口点，设置基本的 App 结构"
- ❌ "写一些代码"

### 2. 文件操作（Files）
- 明确列出新建哪些文件
- 明确列出修改哪些文件
- 使用清晰的文件路径

**示例**:
```
新建文件:
- `Models/User.swift`

修改文件:
- `ViewModels/AppState.swift`
- `Views/ContentView.swift`
```

### 3. 方法列表（Methods）
- 按实现顺序列出
- 包含方法签名和功能说明
- 标注是新增还是修改

**示例**:
```
1. `setupUser()` - 初始化用户数据
2. `validateInput(_:)` - 验证用户输入
3. 修改 `loadData()` - 添加错误处理
```

### 4. 代码要点（Code Highlights）
- 提供完整的代码示例
- 包含必要的注释
- 使用语法高亮标记语言

**示例**:
````markdown
**AppState.swift**:
```swift
@Observable
@MainActor
class AppState {
    var userName: String = ""

    func setupUser() {
        // 初始化逻辑
    }
}
```
````

### 5. 测试验证（Testing）
- 具体的测试步骤
- 预期的结果
- 如何判断成功/失败

**示例**:
```
- 运行应用
- 点击"登录"按钮
- 应该看到用户名显示为 "访客"
- 控制台输出 "User initialized"
```

### 6. 学习重点（Learning Points）
- 列出本次迭代的关键知识点
- 使用简洁的术语
- 3-5个重点即可

**示例**:
```
- `@Observable` 宏的使用
- SwiftUI 状态管理
- 数据流模式
```

### 7. 代码详解（Deep Dive）
- 深入解释代码原理
- 使用示例和对比
- 包含架构图或流程图
- 解释"为什么"这样写

**示例格式**:
```markdown
### 代码详解

#### 1. @Observable 宏的作用

`@Observable` 是 Swift 5.9+ 的新特性，用于自动追踪属性变化：

- 替代了旧的 `ObservableObject` 协议
- 不需要手动添加 `@Published`
- 自动生成观察代码

对比:
```swift
// 旧方式
class AppState: ObservableObject {
    @Published var userName: String = ""
}

// 新方式
@Observable
class AppState {
    var userName: String = ""
}
```

#### 2. 数据流示例

```
View (ContentView)
     ↓ 读取
AppState.userName
     ↓ 修改
自动触发 View 更新
```
```

## 迭代大小指南

### 理想的迭代规模
- **时间**: 15-30分钟完成
- **代码量**: 30-80行新增/修改代码
- **文件数**: 1-2个文件
- **方法数**: 1-3个方法
- **复杂度**: 引入1-2个新概念

### 拆分过大迭代的方法

如果一个迭代太大，按以下方式拆分：

**原始（过大）**:
```
迭代 X: 实现用户登录功能
- 创建登录界面
- 实现网络请求
- 添加数据验证
- 保存用户状态
- 错误处理
```

**拆分后**:
```
迭代 X.1: 创建登录界面 UI
迭代 X.2: 添加输入验证逻辑
迭代 X.3: 实现网络请求
迭代 X.4: 保存用户状态
迭代 X.5: 添加错误处理
```

## 编写技巧

### 1. 使用清晰的标题
- ✅ "迭代 12: 添加用户登录功能"
- ❌ "迭代 12"

### 2. 代码示例完整性
- 包含必要的 import 语句
- 显示上下文代码
- 标注修改的部分

### 3. 循序渐进
- 每个迭代基于前一个迭代
- 不跳跃概念
- 逐步增加复杂度

### 4. 实用的注释
```swift
// ✅ 好的注释
let radius: Float = 0.1  // 10厘米半径

// ❌ 不好的注释
let radius: Float = 0.1  // 设置半径为0.1
```

### 5. 视觉化辅助
使用ASCII图、流程图、表格等帮助理解：

```
用户操作 → 触发事件 → 更新状态 → 刷新UI
```

## 质量检查清单

完成一个迭代文档后，检查：

- [ ] 目标明确且可测试
- [ ] 代码示例完整且可运行
- [ ] 测试步骤具体清晰
- [ ] 学习重点突出
- [ ] 有详细的代码解释
- [ ] 包含架构/流程说明
- [ ] 难度适中，概念不超过2个
- [ ] 与前后迭代连贯

---

**创建时间**: [日期]
**版本**: 1.0
**用途**: 迭代开发模版和规范
